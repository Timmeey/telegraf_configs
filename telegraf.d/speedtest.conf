[[outputs.influxdb_v2]]
  urls = ["$INFLUX_HOST"]
  token = "$INFLUX_TOKEN"
  organization = "$INFLUX_ORG"
  bucket = "speedtest"


[agent]
  debug = $TELEGRAF_DEBUG_ENABLED
  hostname = "$TELEGRAF_HOST"
  interval = "$SPEEDTEST_INTERVAL"

[[inputs.exec]]
## Commands array
commands = ["echo YES | speedtest --format=json-pretty"]

## Timeout for each command to complete.
timeout = "90s"

## measurement name suffix (for separating different commands)
name_suffix = "_speedtest"

## Data format to consume.
## Each data format has its own unique set of configuration options, read
## more about them here:
## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md
data_format = "json"
